# ❌ Что отсутствует в UI/UX (из истории чата)

## Критично отсутствует:

### 1. ❌ WebSocket стриминг прогресса бэктеста
**Текущее состояние:** Кнопка "Запустить бэктест" делает синхронный запрос, UI блокируется
**Нужно:**
- WebSocket endpoint `/ws/backtest/:id` для стриминга прогресса
- Прогресс-бар в UI с процентами, тиками, ETA
- Уведомления о завершении

### 2. ❌ Реальный запуск бэктеста (сейчас заглушка)
**Текущее состояние:** `investor_portal.rs` line 157 - TODO, возвращает фиктивные данные
**Нужно:**
- Интеграция с `BacktestEngine`
- Загрузка исторических данных из PostgreSQL
- Реальный расчет через стратегии

### 3. ❌ Сохранение результатов в PostgreSQL
**Текущее состояние:** Результаты только в памяти (`Arc<Mutex<Vec>>`)
**Нужно:**
- Сохранение через `DatabaseRepository`
- Связь с `user_strategies` для SaaS

### 4. ❌ Рейтинг стратегий с звездами в ответах
**Текущее состояние:** Рейтинг не возвращается в API
**Нужно:**
- Добавить `rating` в `StrategyResult`
- Отобразить звезды в UI

### 5. ❌ Исторические данные BTC/ETH/SOL за 180 дней
**Текущее состояние:** Схема БД есть, скрипта заполнения нет
**Нужно:**
- Скрипт для загрузки данных с Gate.io
- Заполнение `tick_data` и `ohlcv_data`

### 6. ❌ Equity Curve визуализация
**Текущее состояние:** HTML показывает только summary, нет графика
**Нужно:**
- Chart.js для equity curve
- График P&L по времени
- Таблица всех сделок

### 7. ❌ Фоновый запуск бэктеста
**Текущее состояние:** Синхронный запуск блокирует запрос
**Нужно:**
- Task spawn в tokio
- Job queue (можно через Redis или in-memory)
- Статус задач (pending, running, completed, failed)

### 8. ❌ Фильтрация только прибыльных стратегий в API
**Текущее состояние:** UI фильтрует, но API возвращает все
**Нужно:**
- Query параметр `?only_profitable=true`
- Сортировка по ROI/rating

## Что ЕСТЬ ✅:

1. ✅ HTML интерфейс с выбором стратегий, символов, плеча
2. ✅ Визуализация результатов (summary bar, cards)
3. ✅ Фильтрация прибыльных в UI (client-side)
4. ✅ API endpoints структура
5. ✅ Комиссии с учетом rebate 60%

## Приоритет исправлений:

1. **Высокий:** WebSocket прогресс, Реальный бэктест, Сохранение в БД
2. **Средний:** Рейтинг, Исторические данные, Equity curve
3. **Низкий:** Фоновая очередь, Фильтры API

